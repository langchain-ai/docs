---
title: "Astra DB"
---

> [DataStax Astra DB](https://docs.datastax.com/en/astra-db-serverless/index.html) is a serverless AI-ready database built on `Apache CassandraÂ®` and made conveniently available through an easy-to-use JSON API.

See a [tutorial provided by DataStax](https://docs.datastax.com/en/astra/astra-db-vector/tutorials/chatbot.html).

## Installation and Setup

Install the following Python package:

```
pip install "langchain-astradb>=0.6,<0.7"
```

Create a database (if needed) and get the [connection secrets](https://docs.datastax.com/en/astra-db-serverless/get-started/quickstart.html#create-a-database-and-store-your-credentials). Set the following variables:

```
ASTRA_DB_API_ENDPOINT="API_ENDPOINT"ASTRA_DB_APPLICATION_TOKEN="TOKEN"
```

## Vector Store

A few typical initialization patterns are shown here:

```
from langchain_astradb import AstraDBVectorStorevector_store = AstraDBVectorStore(    embedding=my_embedding,    collection_name="my_store",    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,)from astrapy.info import VectorServiceOptionsvector_store_vectorize = AstraDBVectorStore(    collection_name="my_vectorize_store",    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,    collection_vector_service_options=VectorServiceOptions(        provider="nvidia",        model_name="NV-Embed-QA",    ),)from astrapy.info import (    CollectionLexicalOptions,    CollectionRerankOptions,    RerankServiceOptions,    VectorServiceOptions,)vector_store_hybrid = AstraDBVectorStore(    collection_name="my_hybrid_store",    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,    collection_vector_service_options=VectorServiceOptions(        provider="nvidia",        model_name="NV-Embed-QA",    ),    collection_lexical=CollectionLexicalOptions(analyzer="standard"),    collection_rerank=CollectionRerankOptions(        service=RerankServiceOptions(            provider="nvidia",            model_name="nvidia/llama-3.2-nv-rerankqa-1b-v2",        ),    ),)
```

**API Reference:**[AstraDBVectorStore](https://python.langchain.com/api_reference/astradb/vectorstores/langchain_astradb.vectorstores.AstraDBVectorStore.html)

Notable features of class `AstraDBVectorStore`:

* native async API;
* metadata filtering in search;
* MMR (maximum marginal relevance) search;
* server-side embedding computation (["vectorize"](https://docs.datastax.com/en/astra-db-serverless/databases/embedding-generation.html) in Astra DB parlance);
* auto-detect its settings from an existing, pre-populated Astra DB collection;
* [hybrid search](https://docs.datastax.com/en/astra-db-serverless/databases/hybrid-search.html#the-hybrid-search-process) (vector + BM25 and then a rerank step);
* support for non-Astra Data API (e.g. self-hosted [HCD](https://docs.datastax.com/en/hyper-converged-database/1.1/get-started/get-started-hcd.html) deployments);

Learn more in the [example notebook](/oss/integrations/vectorstores/astradb).

See the [example provided by DataStax](https://docs.datastax.com/en/astra/astra-db-vector/integrations/langchain.html).

## Chat message history

```
from langchain_astradb import AstraDBChatMessageHistorymessage_history = AstraDBChatMessageHistory(    session_id="test-session",    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,)
```

**API Reference:**[AstraDBChatMessageHistory](https://python.langchain.com/api_reference/astradb/chat_message_histories/langchain_astradb.chat_message_histories.AstraDBChatMessageHistory.html)

See the [usage example](/oss/integrations/memory/astradb_chat_message_history/#example).

## LLM Cache

```
from langchain.globals import set_llm_cachefrom langchain_astradb import AstraDBCacheset_llm_cache(AstraDBCache(    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,))
```

**API Reference:**[set\_llm\_cache](https://python.langchain.com/api_reference/langchain/globals/langchain.globals.set_llm_cache.html) | [AstraDBCache](https://python.langchain.com/api_reference/astradb/cache/langchain_astradb.cache.AstraDBCache.html)

Learn more in the [example notebook](/oss/integrations/llm_caching/#astra-db-caches) (scroll to the Astra DB section).

## Semantic LLM Cache

```
from langchain.globals import set_llm_cachefrom langchain_astradb import AstraDBSemanticCacheset_llm_cache(AstraDBSemanticCache(    embedding=my_embedding,    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,))
```

**API Reference:**[set\_llm\_cache](https://python.langchain.com/api_reference/langchain/globals/langchain.globals.set_llm_cache.html) | [AstraDBSemanticCache](https://python.langchain.com/api_reference/astradb/cache/langchain_astradb.cache.AstraDBSemanticCache.html)

Learn more in the [example notebook](/oss/integrations/llm_caching/#astra-db-caches) (scroll to the appropriate section).

## Document loader

```
from langchain_astradb import AstraDBLoaderloader = AstraDBLoader(    collection_name="my_collection",    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,)
```

**API Reference:**[AstraDBLoader](https://python.langchain.com/api_reference/astradb/document_loaders/langchain_astradb.document_loaders.AstraDBLoader.html)

Learn more in the [example notebook](/oss/integrations/document_loaders/astradb).

## Self-querying retriever

```
from langchain_astradb import AstraDBVectorStorefrom langchain.retrievers.self_query.base import SelfQueryRetrievervector_store = AstraDBVectorStore(    embedding=my_embedding,    collection_name="my_store",    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,)retriever = SelfQueryRetriever.from_llm(    my_llm,    vector_store,    document_content_description,    metadata_field_info)
```

**API Reference:**[AstraDBVectorStore](https://python.langchain.com/api_reference/astradb/vectorstores/langchain_astradb.vectorstores.AstraDBVectorStore.html) | [SelfQueryRetriever](https://python.langchain.com/api_reference/langchain/retrievers/langchain.retrievers.self_query.base.SelfQueryRetriever.html)

Learn more in the [example notebook](/oss/integrations/retrievers/self_query/astradb).

## Store

```
from langchain_astradb import AstraDBStorestore = AstraDBStore(    collection_name="my_kv_store",    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,)
```

**API Reference:**[AstraDBStore](https://python.langchain.com/api_reference/astradb/storage/langchain_astradb.storage.AstraDBStore.html)

See the API Reference for the [AstraDBStore](https://python.langchain.com/api_reference/astradb/storage/langchain_astradb.storage.AstraDBStore.html).

## Byte Store

```
from langchain_astradb import AstraDBByteStorestore = AstraDBByteStore(    collection_name="my_kv_store",    api_endpoint=ASTRA_DB_API_ENDPOINT,    token=ASTRA_DB_APPLICATION_TOKEN,)
```

**API Reference:**[AstraDBByteStore](https://python.langchain.com/api_reference/astradb/storage/langchain_astradb.storage.AstraDBByteStore.html)

See the API reference for the [AstraDBByteStore](https://python.langchain.com/api_reference/astradb/storage/langchain_astradb.storage.AstraDBByteStore.html).
