---
title: Set Up Custom Authentication
---

## Overview

This tutorial shows you how to add custom authentication to your LangGraph application. You'll learn how to:

1. [Set up basic authentication](/langgraph-platform/set-up-custom-auth) - Validate hard-coded tokens for development
2. [Make conversations private](/langgraph-platform/resource-auth) - Let users have private conversations
3. [Connect an authentication provider](/langgraph-platform/add-auth-server) - Add real user accounts and validate using OAuth2 for production

## Prerequisites

* [**Authentication & Access Control**](/langgraph-platform/auth)
* [**LangGraph Platform**](/langgraph-platform/index)

## Tutorial Overview

This tutorial walks through adding authentication to a simple chatbot. You'll start with a basic bot that anyone can access, then gradually add authentication and authorization features.

The final result will be a bot that:
- Validates user tokens
- Gives each user their own private conversations
- Integrates with a real authentication provider

## Step 1: Basic Authentication

Start with a simple chatbot that accepts hard-coded tokens for development.

![No auth](/langgraph-platform/images/no-auth.png)

### Create the Authentication Handler

The [`Auth`](/langgraph-platform/python-sdk#langgraph_sdk.auth.Auth) object lets you register an authentication function that the LangGraph platform will run on every request. This function receives each request and decides whether to allow it.

Here's a simple authentication handler that validates hard-coded tokens:

```python
from langgraph_sdk.auth import Auth

def authenticate(request):
    # Get the Authorization header from the request
    auth_header = request.headers.get("Authorization")
    
    if not auth_header or not auth_header.startswith("Bearer "):
        return None  # No valid token provided
    
    token = auth_header[7:]  # Remove "Bearer " prefix
    
    # For development, accept any token that starts with "dev_"
    if token.startswith("dev_"):
        return {
            "user_id": token,
            "email": f"{token}@example.com"
        }
    
    return None  # Invalid token

# Create the Auth object
auth = Auth(authenticate=authenticate)
```

Notice that your [authentication](/langgraph-platform/python-sdk#langgraph_sdk.auth.Auth.authenticate) handler does two important things:

1. Checks if a valid token is provided in the request's [Authorization header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization)
2. Returns the user's [identity](/langgraph-platform/python-sdk#langgraph_sdk.auth.types.MinimalUserDict)

Now tell LangGraph to use authentication by adding the following to the [`langgraph.json`](/langgraph-platform/cli#configuration-file) configuration:

```json
{
  "auth": {
    "type": "custom",
    "authenticate": "app.auth.authenticate"
  }
}
```

### Test the Authentication

Now your bot requires authentication! Users must include a valid token in their requests:

```bash
curl -H "Authorization: Bearer dev_user123" \
     -H "Content-Type: application/json" \
     -d '{"messages": [{"role": "user", "content": "Hello!"}]}' \
     http://localhost:8123/threads/thread_123/runs
```

Users without valid tokens will get a 401 Unauthorized response.

### Current State

At this point, your bot:
- ✅ Validates authentication tokens
- ❌ All users can access each other's resources until you add [resource authorization handlers](/langgraph-platform/auth#resource-specific-handlers) in the next section of the tutorial.

![Authentication, no authorization handlers](/langgraph-platform/images/authentication.png)

## Next Steps

1. Continue the tutorial by going to [Make conversations private](/langgraph-platform/resource-auth) to learn about resource authorization.
2. Read more about [authentication concepts](/langgraph-platform/auth).
3. Check out the [API reference](/langgraph-platform/python-sdk) for more authentication details.
